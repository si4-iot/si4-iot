{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar content_serdes_1 = require(\"../content-serdes\");\n\nvar JsonCodec = function () {\n  function JsonCodec(subMediaType) {\n    if (!subMediaType) {\n      this.subMediaType = content_serdes_1.ContentSerdes.DEFAULT;\n    } else {\n      this.subMediaType = subMediaType;\n    }\n  }\n\n  JsonCodec.prototype.getMediaType = function () {\n    return this.subMediaType;\n  };\n\n  JsonCodec.prototype.bytesToValue = function (bytes, schema, parameters) {\n    var parsed;\n\n    try {\n      parsed = JSON.parse(bytes.toString());\n    } catch (err) {\n      if (err instanceof SyntaxError) {\n        if (bytes.byteLength == 0) {\n          parsed = undefined;\n        } else {\n          parsed = bytes.toString();\n        }\n      } else {\n        throw err;\n      }\n    }\n\n    if (parsed && parsed.value !== undefined) {\n      console.warn(\"JsonCodec removing { value: ... } wrapper\");\n      parsed = parsed.value;\n    }\n\n    return parsed;\n  };\n\n  JsonCodec.prototype.valueToBytes = function (value, schema, parameters) {\n    var body = \"\";\n\n    if (value !== undefined) {\n      body = JSON.stringify(value);\n    }\n\n    return Buffer.from(body);\n  };\n\n  return JsonCodec;\n}();\n\nexports.default = JsonCodec;","map":null,"metadata":{},"sourceType":"script"}