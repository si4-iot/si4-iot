{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction transformTDV1StringToV2String(td1) {\n  var td2 = JSON.parse(td1);\n  console.log('NO TD MODIFICATIONS DONE YET!!!!!');\n  return td2;\n}\n\nexports.transformTDV1StringToV2String = transformTDV1StringToV2String;\n\nfunction transformTDV1ObjToV2Obj(td1) {\n  return transformTDV1StringToV2String(JSON.stringify(td1));\n}\n\nexports.transformTDV1ObjToV2Obj = transformTDV1ObjToV2Obj;\n\nfunction transformTDV2StringToV1String(td2) {\n  var td1 = JSON.parse(td2);\n\n  if (td1['base'] != null) {\n    td1['uris'] = [];\n    td1['uris'].push(td1['base']);\n    delete td1['base'];\n  }\n\n  if (td1['interactions'] != null && Array.isArray(td1['interactions'])) {\n    for (var _i = 0, _a = td1['interactions']; _i < _a.length; _i++) {\n      var inter = _a[_i];\n\n      if (inter['@type'] != null && Array.isArray(inter['@type'])) {\n        if (inter['@type'].indexOf('Property') >= 0) {\n          if (td1['properties'] == null) {\n            td1['properties'] = [];\n          }\n\n          td1['properties'].push(inter);\n\n          if (inter['outputData'] != null && inter['outputData']['valueType'] != null) {\n            inter['valueType'] = inter['outputData']['valueType'];\n            delete inter['outputData'];\n          }\n\n          fixLinksV2toHrefsEncodingsV1(td1, inter);\n        }\n\n        if (inter['@type'].indexOf('Action') >= 0) {\n          if (td1['actions'] == null) {\n            td1['actions'] = [];\n          }\n\n          td1['actions'].push(inter);\n          fixLinksV2toHrefsEncodingsV1(td1, inter);\n        }\n\n        if (inter['@type'].indexOf('Event') >= 0) {\n          if (td1['events'] == null) {\n            td1['events'] = [];\n          }\n\n          td1['events'].push(inter);\n\n          if (inter['outputData'] != null && inter['outputData']['valueType'] != null) {\n            inter['valueType'] = inter['outputData']['valueType'];\n            delete inter['outputData'];\n          }\n\n          fixLinksV2toHrefsEncodingsV1(td1, inter);\n        }\n      }\n    }\n\n    delete td1['interactions'];\n  }\n\n  return td1;\n}\n\nexports.transformTDV2StringToV1String = transformTDV2StringToV1String;\n\nfunction fixLinksV2toHrefsEncodingsV1(td1, inter) {\n  if (inter['links'] != null && Array.isArray(inter['links'])) {\n    for (var _i = 0, _a = inter['links']; _i < _a.length; _i++) {\n      var link = _a[_i];\n\n      if (inter['hrefs'] == null) {\n        inter['hrefs'] = [];\n      }\n\n      inter['hrefs'].push(link['href']);\n\n      if (td1['encodings'] == null) {\n        td1['encodings'] = [];\n      }\n\n      if (td1['encodings'].indexOf(link['mediaType']) < 0) {\n        td1['encodings'].push(link['mediaType']);\n      }\n    }\n\n    delete inter['links'];\n  }\n}\n\nfunction transformTDV2ObjToV1Obj(td2) {\n  return transformTDV2StringToV1String(JSON.stringify(td2));\n}\n\nexports.transformTDV2ObjToV1Obj = transformTDV2ObjToV1Obj;\n\nfunction transformTDV3StringToV1String(td3) {\n  var td1 = JSON.parse(td3);\n\n  if (td1['base'] != null) {\n    td1['uris'] = [];\n    td1['uris'].push(td1['base']);\n    delete td1['base'];\n  }\n\n  if (td1['interaction'] != null && Array.isArray(td1['interaction'])) {\n    for (var _i = 0, _a = td1['interaction']; _i < _a.length; _i++) {\n      var inter = _a[_i];\n\n      if (inter['@type'] != null && Array.isArray(inter['@type'])) {\n        if (inter['@type'].indexOf('Property') >= 0) {\n          if (td1['properties'] == null) {\n            td1['properties'] = [];\n          }\n\n          td1['properties'].push(inter);\n\n          if (inter['outputData'] != null) {\n            inter['valueType'] = inter['outputData'];\n            delete inter['outputData'];\n          }\n\n          fixLinksV3toHrefsEncodingsV1(td1, inter);\n        }\n\n        if (inter['@type'].indexOf('Action') >= 0) {\n          if (td1['actions'] == null) {\n            td1['actions'] = [];\n          }\n\n          td1['actions'].push(inter);\n\n          if (inter['outputData'] != null && inter['outputData']['type'] != null) {\n            inter['outputData']['valueType'] = {};\n            inter['outputData']['valueType']['type'] = inter['outputData']['type'];\n            delete inter['outputData']['type'];\n          }\n\n          if (inter['inputData'] != null && inter['inputData']['type'] != null) {\n            inter['inputData']['valueType'] = {};\n            inter['inputData']['valueType']['type'] = inter['inputData']['type'];\n            delete inter['inputData']['type'];\n          }\n\n          fixLinksV3toHrefsEncodingsV1(td1, inter);\n        }\n\n        if (inter['@type'].indexOf('Event') >= 0) {\n          if (td1['events'] == null) {\n            td1['events'] = [];\n          }\n\n          td1['events'].push(inter);\n\n          if (inter['outputData'] != null) {\n            inter['valueType'] = inter['outputData'];\n            delete inter['outputData'];\n          }\n\n          fixLinksV3toHrefsEncodingsV1(td1, inter);\n        }\n      }\n    }\n\n    delete td1['interaction'];\n  }\n\n  return td1;\n}\n\nexports.transformTDV3StringToV1String = transformTDV3StringToV1String;\n\nfunction transformTDV3ObjToV1Obj(td3) {\n  return transformTDV3StringToV1String(JSON.stringify(td3));\n}\n\nexports.transformTDV3ObjToV1Obj = transformTDV3ObjToV1Obj;\n\nfunction fixLinksV3toHrefsEncodingsV1(td1, inter) {\n  if (inter['link'] != null && Array.isArray(inter['link'])) {\n    for (var _i = 0, _a = inter['link']; _i < _a.length; _i++) {\n      var link = _a[_i];\n\n      if (inter['hrefs'] == null) {\n        inter['hrefs'] = [];\n      }\n\n      inter['hrefs'].push(link['href']);\n\n      if (td1['encodings'] == null) {\n        td1['encodings'] = [];\n      }\n\n      if (td1['encodings'].indexOf(link['mediaType']) < 0) {\n        td1['encodings'].push(link['mediaType']);\n      }\n    }\n\n    delete inter['links'];\n  }\n}","map":null,"metadata":{},"sourceType":"script"}